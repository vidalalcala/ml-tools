language: python
addons:
  apt:
    packages:
      - gfortran
env:
  - R_LIBS_USER=~/R/library

cache:
  directories:
    $R_LIBS_USER

python:
  - '2.7'
  - '3.4'
before_install:
  - sudo sh -c 'echo "deb http://cran.rstudio.com/bin/linux/ubuntu trusty/" >> /etc/apt/sources.list'
  - gpg --keyserver keyserver.ubuntu.com --recv-key E084DAB9
  - gpg -a --export E084DAB9 | sudo apt-key add -
  - sudo apt-get update
  - sudo apt-get -y install r-base
  - mkdir -p "$R_LIBS_USER"
  - Rscript -e 'install.packages("ggplot2", dependencies = TRUE, repos = "http://cran.us.r-project.org")'
  - Rscript -e 'install.packages("pROC", dependencies = TRUE, repos = "http://cran.us.r-project.org")'
install:
  - 'pip install coveralls'
  - 'pip install -e .'
script:
  - py.test
  - coverage run --source=ml-tools -m py.test
after_success:
  - coveralls
sudo: True
